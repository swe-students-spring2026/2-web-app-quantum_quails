<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}name placeholder{% endblock %}</title>

    {# Tailwind CSS CDN #}
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gh: {
                            canvas: '#0d1117',
                            surface: '#161b22',
                            border: '#30363d',
                            text: '#c9d1d9',
                            muted: '#8b949e',
                            link: '#58a6ff',
                            green: '#238636',
                            greenText: '#3fb950',
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .fade-bottom {
                mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
                -webkit-mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
            }
        }
    </style>
</head>
<body class="bg-gh-canvas min-h-screen text-gh-text">
    {# Top Header #}
    <header class="bg-gh-surface border-b border-gh-border sticky top-0 z-50">
        <div class="px-4 h-12 flex items-center justify-between">
            <span class="text-base font-semibold text-white">name placeholder</span>

            {% if current_user.is_authenticated %}
            <div class="flex items-center gap-3">
                <span class="text-sm text-gh-muted">{{ current_user.username }}</span>
                <a href="{{ url_for('logout') }}" class="text-sm text-red-400">Logout</a>
            </div>
            {% else %}
            <div class="flex items-center gap-3">
                <a href="{{ url_for('login') }}" class="text-sm text-gh-text">Login</a>
                <a href="{{ url_for('register') }}" class="text-sm px-3 py-1.5 bg-gh-green text-white rounded-md">Register</a>
            </div>
            {% endif %}
        </div>
    </header>

    {# Flash Messages #}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="px-4 pt-3 space-y-2">
                {% for category, message in messages %}
                    <div class="rounded-md px-3 py-2 text-sm border
                        {% if category == 'error' %}
                            bg-red-900/30 text-red-300 border-red-800
                        {% elif category == 'success' %}
                            bg-green-900/30 text-gh-greenText border-green-800
                        {% else %}
                            bg-blue-900/30 text-blue-300 border-blue-800
                        {% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {# Main Content (with bottom padding for tab bar) #}
    <main class="px-4 py-4 pb-20">
        {% block content %}{% endblock %}
    </main>

    {% if current_user.is_authenticated %}
    {# Bottom Tab Bar #}
    <nav class="fixed bottom-0 left-0 right-0 bg-gh-surface border-t border-gh-border z-50">
        <div class="flex items-center justify-around h-16">
            <a href="{{ url_for('index') }}" class="flex flex-col items-center justify-center w-full h-full text-gh-text">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span class="text-xs mt-1">Home</span>
            </a>
            <a href="{{ url_for('search') }}" class="flex flex-col items-center justify-center w-full h-full text-gh-text">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <span class="text-xs mt-1">Search</span>
            </a>
            <a href="{{ url_for('add') }}" class="flex flex-col items-center justify-center w-full h-full text-gh-greenText">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16m8-8H4"/>
                </svg>
                <span class="text-xs mt-1">Add</span>
            </a>
            <a href="#" class="flex flex-col items-center justify-center w-full h-full text-gh-text">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                </svg>
                <span class="text-xs mt-1">Saved</span>
            </a>
            <a href="#" class="flex flex-col items-center justify-center w-full h-full text-gh-text">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                <span class="text-xs mt-1">Profile</span>
            </a>
        </div>
    </nav>
    {% endif %}
</body>
</html>